<!DOCTYPE html>
<html ng-app="gemStore">
	<head>
		<meta charset="utf-8">
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
		<style>
			img{max-width:100%;}
			.img-wrap{max-width:200px;}
			ul.img-thumbnails{max-width:75px;}

			.ng-invalid.ng-dirty{border-color:red;}
			.ng-valid.ng-dirty{border-color:green;}
			
			.product-row{padding: 0 0 25px;margin: 0 0 25px;border-bottom: 3px solid #ccc;}
		
			

		</style>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
		<script src="app.js"></script>
	</head>
	<body class="container" ng-controller="StoreController as store">
		<div class="product-row" ng-repeat="product in store.products | orderBy: '-price'">
			<h3><products-title></products-title> 
			</h3>
			<!-- Image Gallery  -->
			<div class="gallery" ng-show="product.images.length" ng-controller="GalleryController as gallery">
				<div class="img-wrap">
			  		<img ng-src="{{product.images[gallery.current]}}" />
				</div>
				<ul class="img-thumbnails clearfix">
			  		<li class="small-image pull-left thumbnail" ng-repeat="image in product.images">
			    		<img ng-src="{{image}}" />
			  		</li>
				</ul>
			</div>
			<button ng-show="product.canPurchase">Add to Cart</button>
			<section ng-controller="PanelController as panel">
				<ul class="nav nav-pills">
					<li ng-class="{active:panel.isSelected(1)}">
						<a href ng-click="panel.selectTab(1)">Description</a>
					</li>
					<li ng-class="{active:panel.isSelected(2)}">
						<a href ng-click="panel.selectTab(2)">Specifications</a>
					</li>
					<li ng-class="{active:panel.isSelected(3)}">
						<a href ng-click="panel.selectTab(3)">Reviews</a>
					</li>
				</ul>
				<div class="panel" ng-show="panel.isSelected(1)">
					<h4>Description</h4>
					<p>{{product.description}}</p>
				</div>
				<div class="panel" ng-show="panel.isSelected(2)">
					<product-specs></product-specs>
				</div>
				<div class="panel" ng-show="panel.isSelected(3)">
					<h4>Reviews</h4>
					<ul>
						<li ng-repeat="review in product.reviews">
							<blockquote>
			          			<strong> Stars: {{review.stars}}</strong>
			          			<p>{{review.body}}
			          			<cite class="clearfix">by: {{review.author}} on {{review.CreatedOn}}</cite>
			        		</blockquote>
			    		</li>
					</ul>
					<!--  Review Form -->
					<form name="reviewForm" ng-controller="ReviewController as reviewCtrl" ng-submit="reviewForm.$valid && reviewCtrl.addReview(product)" novalidate>
			  			<!--  Live Preview -->
			  			<blockquote>
			    			<strong>{{reviewCtrl.review.stars}} Stars</strong>
			    			{{reviewCtrl.review.body}}
			    			<cite class="clearfix">â€” {{reviewCtrl.review.author}}</cite>
			  			</blockquote>
			          	<!--  Review Form -->
				      	<h4>Submit a Review</h4>
						<fieldset class="form-group">
			    			<select class="form-control" ng-model="reviewCtrl.review.stars" ng-options="stars for stars in [5,4,3,2,1]"  title="Stars" required>
			      				<option value="">Rate the Product</option>
			    			</select>
			  			</fieldset>
			  			<fieldset class="form-group">
			    			<textarea ng-model="reviewCtrl.review.body" class="form-control" placeholder="Write a short review of the product..." title="Review" required></textarea>
			  			</fieldset>
			  			<fieldset class="form-group">
			    			<input ng-model="reviewCtrl.review.author" type="email" class="form-control" placeholder="jimmyDean@example.org" title="Email" required />
			  			</fieldset>
			  			<fieldset class="form-group">
			    			<input type="submit" class="btn btn-primary pull-right" value="Submit Review" />
			  			</fieldset>
					</form>						
				</div>
			</section>	
		</div>		
	</body>	
</html>